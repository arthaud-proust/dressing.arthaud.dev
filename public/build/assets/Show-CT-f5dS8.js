import{a as n,c as r,h as o,d as W,b as p,g as s,k as g,q as K,n as O,r as G,l as j,aa as h,f as d,e as c,F as m,Z as P,i as f,t as a,p as Q,s as F,x as R}from"./app-Dx26qlXV.js";import{r as U,_ as X,b as Y}from"./NoLayout.vue_vue_type_script_setup_true_lang-S_It9hZt.js";import{_ as $}from"./VButton.vue_vue_type_script_setup_true_lang-D51bOqsU.js";import{_ as E}from"./VStretchedButton.vue_vue_type_script_setup_true_lang-Cg1zX6vC.js";import{V as H}from"./VTag--xossPnz.js";import{_ as ee}from"./ClothingCard.vue_vue_type_script_setup_true_lang-B40oPW3c.js";import{u as te}from"./useClothesCategories-DPHyWEB8.js";import{r as T}from"./ArrowRightIcon-CHakF1j5.js";import{r as I}from"./CheckIcon-tC_gxrHG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function se(_,i){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})])}function ne(_,i){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})])}function J(_,i){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function ae(_,i){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}const A=W({__name:"VAlert",props:{type:{}},setup(_){return(i,v)=>(n(),r("div",{class:O(["flex gap-2 rounded-lg p-3",{"bg-blue-50 text-blue-800":i.type==="info","bg-green-50 text-green-800":i.type==="success","bg-orange-50 text-orange-800":i.type==="warning","bg-red-50 text-red-800":i.type==="danger"}])},[i.type==="info"?(n(),p(s(ae),{key:0,class:"mt-0.5 size-5 shrink-0"})):g("",!0),i.type==="success"?(n(),p(s(U),{key:1,class:"mt-0.5 size-5 shrink-0"})):i.type==="warning"?(n(),p(s(ne),{key:2,class:"mt-0.5 size-5 shrink-0"})):i.type==="danger"?(n(),p(s(J),{key:3,class:"mt-0.5 size-5 shrink-0"})):g("",!0),o("div",null,[K(i.$slots,"default")])],2))}}),oe=({min:_,current:i,available:v})=>{const y=G({}),M=t=>{var e;return(e=h(y)[t.clothes_category_id])==null?void 0:e.has(t.id)},C=t=>{var e,w;(e=h(y))[w=t.clothes_category_id]??(e[w]=new Set),M(t)?h(y)[t.clothes_category_id].delete(t.id):h(y)[t.clothes_category_id].add(t.id)},B=t=>{var e;return((e=h(y)[t])==null?void 0:e.size)??0},b=()=>Object.values(h(y)).flatMap(t=>[...t]),D=t=>Number.parseInt(t),k=t=>h(_)[t]-(h(i)[t]??0),q=t=>k(t)>0,z=t=>h(v)[t]>=k(t),V=t=>z(t)?B(t)>=k(t):B(t)===h(v)[t],N=j(()=>Object.keys(_).map(t=>z(D(t)))),S=j(()=>Object.keys(_).map(t=>D(t)).filter(t=>q(t))),Z=j(()=>Object.keys(_).map(t=>k(D(t)))),l=j(()=>{let t=0,e=0;return Object.values(h(_)).forEach(w=>{e++,w===0&&t++}),100*t/Math.max(e,1)});return{selectedClothesId:y,isClothingSelected:M,toggleClothingSelection:C,computeSelectedClothesId:b,selectedCountForCategory:B,categoryFromString:D,missingCountForCategory:k,isCategoryIncomplete:q,isCategoryCompletedWithSelection:V,canCategoryBeCompleted:z,canAllCategoriesBeCompleted:N,missingCountByCategory:Z,incompleteCategories:S,percentageOfMinNotDefined:l}},le={class:"mb-4 flex text-sm"},re={class:"sr-only"},ie={class:"text-xl font-semibold leading-tight text-gray-800"},ue={class:"mt-2 flex items-center gap-2"},de={class:"text-sm text-neutral-500"},ce={class:"text-xl"},_e={class:"mt-2"},me={class:"mx-auto mt-auto flex w-full max-w-lg flex-col"},ge={class:"font-bold"},pe={class:"mt-2"},he={class:"text-xl"},fe={class:"mt-4 list-inside list-disc space-y-2 rounded-lg bg-neutral-50 px-4 py-2"},ve={key:1},ye={class:"text-xl"},Ce={key:0,class:"mt-4 list-inside list-disc space-y-2 rounded-lg bg-neutral-50 px-4 py-2"},ke={class:"mt-auto text-xl"},be={class:"ms-1 mt-2 list-inside list-disc"},we={class:"mt-2 grid grid-cols-2 gap-2 pb-8"},$e={class:"sticky bottom-0 z-20 mt-auto w-full pb-4"},Fe=W({__name:"Show",props:{originDressing:{},destinationDressing:{},clothesCountByCategoryInDestination:{},clothesMinByCategoryInDestination:{},clothesByCategoryAtOrigin:{}},setup(_){const i=_,v=te(),y=j(()=>Object.fromEntries(Object.entries(i.clothesByCategoryAtOrigin).map(([e,w])=>[e,w.length]))),{computeSelectedClothesId:M,incompleteCategories:C,missingCountForCategory:B,canCategoryBeCompleted:b,toggleClothingSelection:D,isClothingSelected:k,selectedCountForCategory:q,isCategoryCompletedWithSelection:z,percentageOfMinNotDefined:V}=oe({min:i.clothesMinByCategoryInDestination,current:i.clothesCountByCategoryInDestination,available:y}),N=()=>{R.post(route("clothes.move.store",[i.originDressing,i.destinationDressing]),{clothes_id:M()})},S=()=>{l.value==="start"?l.value=0:l.value===C.value.length-1?l.value="end":l.value!=="end"&&l.value++},Z=()=>{l.value==="end"?l.value=C.value.length-1:l.value===0?l.value="start":l.value!=="start"&&l.value--},l=G("start"),t=j(()=>{if(l.value==="start"||l.value==="end")return null;const e=C.value[l.value];if(!e)throw new Error("undefined category");return{step:l.value+1,totalSteps:C.value.length,category:e,clothes:i.clothesByCategoryAtOrigin[e],canBeCompleted:b(e),missingCount:B(e)}});return(e,w)=>(n(),r(m,null,[d(s(P),{title:e.$t("dplacer_des_vtements")},null,8,["title"]),d(X,null,{header:c(()=>[o("div",le,[l.value!=="start"?(n(),r("button",{key:0,onClick:Z,class:"-m-2 flex items-center gap-1 p-2"},[d(s(se),{class:"size-4"}),f(" "+a(e.$t("prcdent")),1)])):g("",!0),d(s(Q),{href:e.route("suitcase.index"),class:"-m-2 ml-auto flex items-center gap-1 p-2"},{default:c(()=>[o("span",re,a(e.$t("quitter")),1),d(s(Y),{class:"size-5"})]),_:1},8,["href"])]),l.value==="start"||l.value==="end"?(n(),r(m,{key:0},[o("h2",ie,a(e.$t("faire_ma_valise")),1),d(E,{href:e.route("suitcase.index"),"sr-text":e.$t("modifier_lorigine_ou_la_destination")},{default:c(()=>[o("div",ue,[d(H,null,{default:c(()=>[f(a(e.originDressing.name),1)]),_:1}),d(s(T),{class:"size-5"}),d(H,null,{default:c(()=>[f(a(e.destinationDressing.name),1)]),_:1})])]),_:1},8,["href","sr-text"])],64)):g("",!0),t.value?(n(),r(m,{key:1},[o("p",de,a(e.$t("etape_n_sur_total",{n:t.value.step,total:t.value.totalSteps})),1),o("h3",ce,a(e.$t("slectionne_n_clothing",{n:t.value.missingCount,clothing:s(v).name(t.value.category).toLowerCase()})),1),t.value.canBeCompleted?g("",!0):(n(),p(A,{key:0,type:"warning",class:"mt-2"},{default:c(()=>[o("p",null,a(e.$t("il_ny_a_pas_assez_de_clothing_dans_ce_dressing",{clothing:s(v).name(t.value.category).toLowerCase()})),1),o("p",_e,a(e.$t("peuttre_que_tu_nas_pas_tout_ajout_sur_lapplication")),1)]),_:1}))],64)):g("",!0)]),default:c(()=>{var L;return[o("div",me,[l.value==="start"?(n(),r(m,{key:0},[s(V)===100?(n(),p(A,{key:0,type:"warning",class:"mb-4"},{default:c(()=>[o("p",ge,a(e.$t("tu_nas_pas_configur_de_minimum_par_catgorie")),1),o("p",pe,a(e.$t("il_faut_que_tu_indique_combien_de_vtement_au_minim")),1),d($,{small:"",variant:"warning",href:e.route("dressings.edit",e.destinationDressing),class:"mt-2"},{default:c(()=>[f(a(e.$t("configurer_le_dressing")),1)]),_:1},8,["href"])]),_:1})):s(V)>90?(n(),p(A,{key:1,type:"info",class:"mb-4"},{default:c(()=>[o("p",null,a(e.$t("tu_peux_configurer_le_minimum_de_vtement_pour_chaque")),1),d($,{small:"",variant:"info",href:e.route("dressings.edit",e.destinationDressing),class:"mt-2"},{default:c(()=>[f(a(e.$t("configurer_le_dressing")),1)]),_:1},8,["href"])]),_:1})):g("",!0),s(C).length?(n(),r(m,{key:2},[o("h3",he,a(e.$t("ce_quil_faut_mettre_dans_ta_valise")),1),o("ul",fe,[(n(!0),r(m,null,F(s(C),u=>{var x;return n(),r("li",null,[o("span",{class:O(s(b)(u)||"font-bold text-orange-600")},[s(b)(u)?g("",!0):(n(),p(s(J),{key:0,class:"me-1 inline size-5 stroke-2 align-text-bottom"})),o("span",null,a(s(B)(u))+" "+a(s(v).name(u)),1),s(b)(u)?g("",!0):(n(),r("span",ve," ("+a(e.$t("tu_nen_as_que_n",((x=e.clothesByCategoryAtOrigin[u])==null?void 0:x.length)??0))+") ",1))],2)])}),256))]),d($,{class:"mt-4",onClick:S},{default:c(()=>[f(a(e.$t("je_commence_ma_valise")),1)]),_:1})],64)):(n(),r(m,{key:3},[o("h3",ye,a(e.$t("tu_as_dj_tout_ce_quil_faut_lbas")),1),Object.entries(e.clothesCountByCategoryInDestination).length?(n(),r("ul",Ce,[(n(!0),r(m,null,F(Object.entries(e.clothesCountByCategoryInDestination),([u,x])=>(n(),r("li",null,a(x)+" "+a(s(v).name(Number.parseInt(u))),1))),256))])):g("",!0),d($,{class:"mt-4",href:e.route("dressings.show",e.destinationDressing)},{default:c(()=>[f(a(e.$t("voir_le_dressing")),1)]),_:1},8,["href"])],64))],64)):l.value==="end"?(n(),r(m,{key:1},[o("h3",ke,a(e.$t("ce_quil_doit_y_avoir_dans_ta_valise")),1),o("ul",be,[(n(!0),r(m,null,F(s(C),u=>(n(),r("li",null,[o("span",{class:O(s(b)(u)||"font-bold text-orange-600")},a(s(q)(u))+" "+a(s(v).name(u)),3)]))),256))]),d($,{class:"mt-4",onClick:N},{default:c(()=>[f(a(e.$t("jai_fini_ma_valise"))+" ",1),d(s(I),{class:"size-5"})]),_:1})],64)):t.value?(n(),r(m,{key:2},[o("div",we,[(n(!0),r(m,null,F(t.value.clothes,u=>(n(),p(E,{"sr-text":e.$t("voir_le_dtail"),onClick:x=>s(D)(u),class:O(["shrink-0 overflow-hidden rounded-xl border-4",s(k)(u)?"border-amber-500":"border-transparent"])},{default:c(()=>[d(ee,{clothing:u},null,8,["clothing"]),o("div",{class:O(["absolute right-1 top-1 size-6 rounded-full border p-0.5",s(k)(u)?"border-amber-500 bg-amber-500 text-amber-100":"border-neutral-200 bg-neutral-100"])},[s(k)(u)?(n(),p(s(I),{key:0,class:"size-full"})):g("",!0)],2)]),_:2},1032,["sr-text","onClick","class"]))),256))]),o("div",$e,[(L=t.value.clothes)!=null&&L.length?(n(),p($,{key:1,disabled:!s(z)(t.value.category),class:"w-full",onClick:S},{default:c(()=>[f(a(e.$t("cest_dans_ma_valise"))+" ",1),d(s(I),{class:"size-5"})]),_:1},8,["disabled"])):(n(),p($,{key:0,class:"w-full",onClick:S},{default:c(()=>[f(a(e.$t("suivant"))+" ",1),d(s(T),{class:"size-5"})]),_:1}))])],64)):g("",!0)])]}),_:1})],64))}});export{Fe as default};
